<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>ATM</title>
</head>
<body>
    <div class="content">
        <h3 id="message">totaal bedrag</h3>
        <h1 id="bedrag">530</h1>
    </div>
    <script>
        if (/^file:\/\/\//.test(location.href)) {
            let path = './';
            let orig = fetch;
            window.fetch = (resource) => ((/^[^/:]*:/.test(resource)) ?
                orig(resource) :
                new Promise(function(resolve, reject) {
                    let request = new XMLHttpRequest();
        
                    let fail = (error) => {reject(error)};
                    ['error', 'abort'].forEach((event) => { request.addEventListener(event, fail); });
        
                    let pull = (expected) => (new Promise((resolve, reject) => {
                        if (
                            request.responseType == expected ||
                            (expected == 'text' && !request.responseType)
                        )
                            resolve(request.response);
                        else
                            reject(request.responseType);
                    }));
        
                    request.addEventListener('load', () => (resolve({
                        arrayBuffer : () => (pull('arraybuffer')),
                        blob        : () => (pull('blob')),
                        text        : () => (pull('text')),
                        json        : () => (pull('json'))
                    })));
                    request.open('GET', resource.replace(/^\//, path));
                    request.send();
                })
            );
        }
    </script>
    <script src="script.js"></script>
</body>
</html>